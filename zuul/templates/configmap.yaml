apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "zuul.fullname" . }}
  labels:
    app: {{ template "zuul.name" . }}
    chart: {{ template "zuul.chart" . }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
data:
  zuul.conf: |-
    [gearman]
    server=127.0.0.1

    [gearman_server]
    start=true

    [executor]
    private_key_file=/var/lib/zuul/.ssh/nodepool_rsa

    [web]
    listen_address=0.0.0.0

    [scheduler]
    tenant_config=/etc/zuul/main.yaml
  main.yaml: |-
    - tenant:
        name: quickstart
